# Internationalisation (i18n)

Le site est bilingue FR/EN via un contexte maison.

## Utilisation

- Récupérer le contexte:
  const { t, lang, setLang } = useI18n()
- Traduire:
  t('hero.title1')
- Changer la langue:
  setLang(lang === 'fr' ? 'en' : 'fr')

## Persistance et html lang

- La langue est stockée dans localStorage('lang')
- L’attribut &lt;html lang="…" /&gt; est mis à jour automatiquement

## Ajout de nouvelles clés

- Fichier: src/i18n/I18nContext.tsx
- Ajouter la clé dans fr et en:
  fr['my.section.title'] = 'Mon titre'
  en['my.section.title'] = 'My Title'
- Utiliser t('my.section.title') dans le composant

Bonnes pratiques:
- Préfixer par domaine: hero., nav., blog., current., etc.
- Garder des libellés courts pour les boutons/menus
- Pour les phrases composées, utiliser l’interpolation simple:
  t('current.speedModelFmt').replace('{n}', String(kmPerDay))

## Données traduites (articles, bios, specs)

Deux options:
1) Traduire côté UI (clés i18n uniquement). Simple pour libellés système.
2) Traduire côté données:
   - Schéma recommandé (exemple blogPosts):
     {
       id: 'post-1',
       title: { fr: 'Titre FR', en: 'EN Title' },
       excerpt: { fr: 'Extrait FR', en: 'EN Excerpt' },
       category: { fr: 'Route', en: 'Road' },
       image: 'https://…',
       date: '2025-05-30'
     }
   - Dans BlogPosts.tsx:
     const { lang } = useI18n();
     const title = isObj(post.title) ? post.title[lang] ?? post.title.fr : post.title

3) Fallback:
   - Toujours prévoir un fallback FR si la version EN manque:
     const pick = (x) => (typeof x === 'string' ? x : (x[lang] ?? x.fr))

## Formats nombre/date

- Utiliser l’API Intl adaptée à la langue:
  const locale = lang === 'fr' ? 'fr-FR' : 'en-US'
  date.toLocaleString(locale, { … })
  n.toLocaleString(locale)

## Tests

- Basculer FR/EN et vérifier:
  - Header/Footer/menus
  - Titres/CTA/Tooltips/Aria
  - SEO (titres/meta)
  - Carte (aria-live, libellés boutons)

## À éviter

- Libellés en dur (hardcoded) dans JSX
- Mélanger clés FR/EN dans le même composant
- Oublier la mise à jour du html lang